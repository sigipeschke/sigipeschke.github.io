<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./main.css">
    <link rel="icon" type="image/x-icon" href="/static/images/account_circle.ico">
    <title>About Siegfried Peschke</title>

    <script src="https://cdn.jsdelivr.net/npm/pixi.js@7.1.1/dist/pixi.min.js"></script>
    <script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

    <script type="importmap">
        {
          "imports": {
            "three": "https://unpkg.com/three@0.149.0/build/three.module.js"
          }
        }
      </script>
</head>

<body class="about-page">
    <!--Navbar-->
    <div id="nav-placeholder"></div>
    <script src="//code.jquery.com/jquery.min.js"></script>
    <script>$(function(){$("#nav-placeholder").load("navbar.html");});</script>

    <div class="pixi-container">
        <script>
            // PIXI Scene
            
            const app = new PIXI.Application({
                width: window.innerWidth,
                height: window.innerHeight,
                transparent: false,
                antialias: true,
                resizeTo: window,
                backgroundAlpha: 0
            });
            // app.renderer.background.color = 0x152238;
            app.renderer.view.style.position = 'absolute';
            
            document.body.appendChild(app.view);
            
            // Star Field Background
            
            const bgContainer = new PIXI.Container();
            app.stage.addChild(bgContainer);
            
            const starTexture = PIXI.Texture.from('/static/images/white-star.png');
            
            let starAmount = 5000;
            if (window.innerWidth < 769) {
                starAmount = 500;
            } 
            let cameraZ = 0;
            const fov = 30;
            const baseSpeed = 0.05;
            let speed = 0.1;
            let warpSpeed = 0;
            const starStretch = 5;
            const starBaseSize = 0.005;
            
            // Create the stars
            const stars = [];
            for (let i = 0; i < starAmount; i++) {
                const star = {
                    sprite: new PIXI.Sprite(starTexture),
                    z: 0,
                    x: 0,
                    y: 0,
                };
                star.sprite.anchor.x = 0.5;
                star.sprite.anchor.y = 0.7;
                randomizeStar(star, true);
                bgContainer.addChild(star.sprite);
                stars.push(star);
            }
            
            function randomizeStar(star, initial) {
                star.z = initial ? Math.random() * 2000 : cameraZ + Math.random() * 1000 + 2000;
                const deg = Math.random() * Math.PI * 2;
                const distance = Math.random() * 25 + 1;
                star.x = Math.cos(deg) * 2*distance;
                star.y = Math.sin(deg) * 2*distance - 4;
            }
            
            // Change flight speed every 5 seconds
            setInterval(() => {
                warpSpeed = warpSpeed > 0 ? 0 : 0;
            }, 5000);
            
            // Listen for animate update
            app.ticker.add((delta) => {
                speed += (warpSpeed - speed) / 20;
                cameraZ += delta * 10 * (speed + baseSpeed);
                for (let i = 0; i < starAmount; i++) {
                    const star = stars[i];
                    if (star.z < cameraZ) randomizeStar(star);
            
                    const z = star.z - cameraZ;
                    star.sprite.x = star.x * (fov / z) * app.renderer.screen.width + app.renderer.screen.width / 2;
                    star.sprite.y = star.y * (fov / z) * app.renderer.screen.width + app.renderer.screen.height / 2;
            
                    const dxCenter = star.sprite.x - app.renderer.screen.width / 2;
                    const dyCenter = star.sprite.y - app.renderer.screen.height / 2;
                    const distanceCenter = Math.sqrt(dxCenter * dxCenter + dyCenter * dyCenter);
                    const distanceScale = Math.max(0, (2000 - z) / 2000);
                    star.sprite.scale.x = distanceScale * starBaseSize;
            
                    star.sprite.scale.y = distanceScale * starBaseSize + distanceScale * speed * starStretch * distanceCenter / app.renderer.screen.width;
                    star.sprite.rotation = Math.atan2(dyCenter, dxCenter) + Math.PI / 2;
                }
            });
        </script>
    </div>

    <div class="hero">
        <h1>About Sigi</h1>

        <div class="about-s">
            <div class="about-rcontainer">
                <a id="about-r1" class="about-r">
                    <img src="/static/images/about/starship1.png">
                </a>
                <a id="about-r2" class="about-r">
                    <img src="/static/images/about/starship2.png">
                </a>
                <a id="about-r3" class="about-r">
                    <img src="/static/images/about/starship3.png">
                </a>
                <a id="about-r4" class="about-r">
                    <img src="/static/images/about/starship4.png">
                </a>
                <img id="about-rFlame" src="/static/images/about/flame.png">
            </div>
            
            <p class="about-r-poem">
                I am a rocket, powerful, glamorous. <br>
                A marvel of engineering, built for the long haul. <br>
                With every launch, I reach for the stars. <br>
                Soaring through the skies, leaving my scars.
            </p>

            <div id="about-li1" class="about-li">
                <img src="/static/images/about/aspiring.png">
                <h3>Grand Aspirations</h3>
                <p>
                    My mission is to leave a positive impact in the world by enhancing the lives of those around me. I am confident that my unique background and experiences make me a valuable asset to any team and I am eager to work with a forward-thinking company that values creative problem solving and continuous learning.
                </p>
            </div>
            <div id="about-li2" class="about-li">
                <img src="/static/images/about/improving.png">
                <h3>Always Improving</h3>
                <p>
                    I strongly believe in striving to become the best version of myself that I can. As such, I seek out new opportunities to improve my skills and knowledge within my passions. It is fundamental to my growth as a person and professional to learn something new every day.
                </p>
            </div>
            <div id="about-li3" class="about-li">
                <img src="/static/images/about/solving.png">
                <h3>Problem Solving</h3>
                <p>
                    My background in physics has given me a strong foundation in mathematical modeling and problem solving. I approach complex challenges in a methodical and logical manner, to devise efficient solutions.
                </p>
            </div>
            <div id="about-li4" class="about-li">
                <img src="/static/images/about/exercise.png">
                <h3>Fueled by Health</h3>
                <p>
                    My commitment to a healthy lifestyle is a cornerstone of my overall well-being. I maintain a clean diet and exercise regimen, and push my athleticism in sports I enjoy such as soccer, skiing, and badminton. Healthy body = healthy mind.
                </p>
            </div>
        </div>
    </div>

    <canvas class="webgl"></canvas>

    <script type="module">
import * as THREE from 'three'

// Canvas
const canvas = document.querySelector('canvas.webgl')

// Scene
const scene = new THREE.Scene()

// Texture
const textureLoader = new THREE.TextureLoader()

const sunMap = textureLoader.load('/static/textures/sun-map.jpg')
const sunTexture = textureLoader.load('/static/textures/sun-texture.jpg')
// const earthMap = textureLoader.load('/static/textures/earth-map.jpg')
// const earthTexture = textureLoader.load('/static/textures/earth-texture-2.png')

// Objects
const sunGeo = new THREE.SphereGeometry(2, 64, 64)
const sunLightGeo = new THREE.SphereGeometry(2.6, 64, 64)
const earthGeo = new THREE.SphereGeometry(1, 64, 64)
const atmosphereGeo = new THREE.SphereGeometry(1.3, 64, 64)

// Shaders

const sunShaderVert = `
    varying vec3 vertexNormal;

    void main() {
        vertexNormal = normalize(normalMatrix * normal);

        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
`

const sunShaderFrag = `
    varying vec3 vertexNormal;

    void main() {
        float intensity = pow(0.5 - dot(vertexNormal, vec3(0.0, 0.0, 1.0)), 2.0);

        gl_FragColor = vec4(1.0, 0.5, 0.2, 1.0) * intensity;
    }
`

const earthShaderVert = `
    varying vec2 vertexUV;
    varying vec3 vertexNormal;

    void main() {
        vertexUV = uv;
        vertexNormal = normalize(normalMatrix * normal);

        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
`

const earthShaderFrag = `
    uniform sampler2D globeTexture;
    varying vec2 vertexUV;
    varying vec3 vertexNormal;

    void main() {
        float intensity = 1.05 - dot(vertexNormal, vec3(0.0, 0.0, 1.0));
        vec3 atmosphere = vec3(0.3, 0.6, 1.0) * pow(intensity, 1.5);

        gl_FragColor = vec4(texture2D(globeTexture, vertexUV).xyz, 1.0);
    }
`

const atmosphereShaderVert = `
    varying vec3 vertexNormal;

    void main() {
        vertexNormal = normalize(normalMatrix * normal);

        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
`

const atmosphereShaderFrag = `
    varying vec3 vertexNormal;

    void main() {
        float intensity = pow(0.5 - dot(vertexNormal, vec3(0.0, 0.0, 1.0)), 2.0);

        gl_FragColor = vec4(0.3, 0.6, 1.0, 1.0) * intensity;
    }
`

// Materials

const sunMat = new THREE.MeshStandardMaterial()
sunMat.normalMap = sunMap
sunMat.map = sunTexture

const sunLightMat = new THREE.ShaderMaterial({
    vertexShader: sunShaderVert,
    fragmentShader: sunShaderFrag,
    blending: THREE.AdditiveBlending,
    side: THREE.BackSide
})


const earthMat = new THREE.ShaderMaterial({
    vertexShader: earthShaderVert,
    fragmentShader: earthShaderFrag,
    uniforms: {
        globeTexture: {
            value: textureLoader.load('/static/textures/earth-texture-2.png')
        }
    }
})

// const earthMat = new THREE.MeshStandardMaterial()
// earthMat.normalMap = earthMap
// earthMat.map = earthTexture

const atmosphereMat = new THREE.ShaderMaterial({
    vertexShader: atmosphereShaderVert,
    fragmentShader: atmosphereShaderFrag,
    blending: THREE.AdditiveBlending,
    side: THREE.BackSide
})

// Mesh

const sun = new THREE.Mesh(sunGeo, sunMat)
sun.position.set(0, 6, -50)
scene.add(sun)

const sunLight = new THREE.Mesh(sunLightGeo, sunLightMat)
sunLight.position.set(0, 6.2, -50)
scene.add(sunLight)

const earth = new THREE.Mesh(earthGeo, earthMat)
earth.position.set(0, 0, 10)
scene.add(earth)

const atmosphere = new THREE.Mesh(atmosphereGeo, atmosphereMat)
atmosphere.position.set(0, 0, 10.5)
scene.add(atmosphere)

// Lights

const light = new THREE.AmbientLight(0x404040, 4)
scene.add(light)

/**
 * Sizes
 */
const sizes = {
    width: window.innerWidth,
    height: window.innerHeight
}

window.addEventListener('resize', () =>
{
    // Update sizes
    sizes.width = window.innerWidth
    sizes.height = window.innerHeight

    // Update camera
    camera.aspect = sizes.width / sizes.height
    camera.updateProjectionMatrix()

    // Update renderer
    renderer.setSize(sizes.width, sizes.height)
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))
})

/**
 * Camera
 */

// Base camera
const camera = new THREE.PerspectiveCamera(50, sizes.width / sizes.height, 0.1, 100)
camera.position.set(0, 1.25, 11.5)
camera.lookAt(0, 0, 0)
scene.add(camera)

/**
 * Renderer
 */
const renderer = new THREE.WebGLRenderer({
    canvas: canvas,
    antialias: true,
    alpha: true
})
renderer.setSize(sizes.width, sizes.height)
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2))

/**
 * Animate
 */

document.addEventListener('mousemove', onDocumentMouseMove)

let mouseX = 0
let mouseY = 0
const windowHalfX = window.innerWidth / 2
const windowHalfY = window.innerHeight / 2

function onDocumentMouseMove(event) {
    mouseX = (event.clientX - windowHalfX) * 0.001
    mouseY = (event.clientY - windowHalfY) * 0.001
}

const clock = new THREE.Clock()

const tick = () =>
{

    const elapsedTime = clock.getElapsedTime()

    // Update objects
    sun.rotation.y = 0.2 * elapsedTime
    earth.rotation.x = -0.2 * elapsedTime
    // earth.rotation.x += 0.1 * (mouseY - earth.rotation.x)
    earth.rotation.y += 0.001 * (mouseX - earth.rotation.y)

    // Render
    renderer.render(scene, camera)

    // Call tick again on the next frame
    window.requestAnimationFrame(tick)
}

tick()
    </script>

    <script>
        const activeFilter = 'invert(93%) sepia(13%) saturate(275%) hue-rotate(154deg) brightness(97%) contrast(95%)'

        const r1 = document.getElementById('about-r1')
        const li1 = document.getElementById('about-li1')
        const r2 = document.getElementById('about-r2')
        const li2 = document.getElementById('about-li2')
        const r3 = document.getElementById('about-r3')
        const li3 = document.getElementById('about-li3')
        const r4 = document.getElementById('about-r4')
        const li4 = document.getElementById('about-li4')

        var activeR = r1
        var activeLi = li1
        r1.style.filter = activeFilter
        li1.style.visibility = 'visible'

        function activeHandler(r, l) {
            activeR.style.filter = 'none'
            activeLi.style.visibility = 'hidden'

            r.style.filter = activeFilter
            l.style.visibility = 'visible'

            activeR = r
            activeLi = l
        }

        r1.addEventListener('mouseover', () => {
            activeHandler(r1, li1)
        })
        r2.addEventListener('mouseover', () => {
            activeHandler(r2, li2)
        })
        r3.addEventListener('mouseover', () => {
            activeHandler(r3, li3)
        })
        r4.addEventListener('mouseover', () => {
            activeHandler(r4, li4)
        })
    </script>
</body>
</html>